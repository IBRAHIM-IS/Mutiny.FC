<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>{{ page.title if page else "MUTINY" }}</title>
<style>
:root{
  --bg:#111;
  --side:#222;
  --card:#333;
  --accent:#fff;
  --hover:#555;
}
body{
  margin:0;font-family:Arial, "Noto Naskh Arabic", sans-serif;
  background:var(--bg);color:var(--accent);
}

/* زر القائمة على اليسار */
.menu-btn{
  display:block;
  position:fixed;
  top:10px;
  left:10px;
  z-index:9999;
  background: var(--side);
  color: var(--accent);
  padding:10px 15px;
  font-size:20px;
  border-radius:6px;
  cursor:pointer;
  transition: top 0.3s;
}

/* sidebar على اليمين */
.sidebar{
  position:fixed; top:0; right:0; width:260px; height:100vh;
  background:var(--side); color:var(--accent); padding:20px; box-sizing:border-box; transition:0.3s;
  z-index:1000;
}
.sidebar h2{margin:0 0 20px;font-size:22px;text-align:center}
.sidebar a{display:block;color:var(--accent);text-decoration:none;padding:10px;border-radius:6px;margin-bottom:8px}
.sidebar a:hover{background:var(--hover)}
.sidebar img{vertical-align:middle;margin-left:10px;width:36px;height:36px;border-radius:6px;object-fit:cover}

/* main content */
.main{
  margin-right:280px; padding:40px; min-height:100vh; box-sizing:border-box; display:flex; flex-direction:column; align-items:center;
}
.card{
  width:100%; max-width:900px; background:var(--card); border-radius:12px; padding:30px; box-shadow:0 6px 20px rgba(0,0,0,0.5); text-align:center
}
.hero-img{max-width:100%; height:auto; border-radius:10px; margin-bottom:20px; cursor:pointer}
.title-big{font-size:64px; font-weight:900; margin-bottom:15px; color:var(--accent)}
.subtitle{font-size:24px; color:var(--accent); margin-bottom:25px}
.section-text{text-align:center; font-size:18px; line-height:1.8; color:var(--accent)}
.kit-thumb{max-width:240px; width:90%; border-radius:8px; display:block; margin:12px auto}

/* responsive */
@media (max-width:900px){
  .menu-btn{display:block}
  .sidebar{position:fixed; width:70%; height:100vh; right:-100%; top:0; overflow-y:auto}
  .sidebar.active{right:0}
  .main{margin:0;padding:20px}
  .card{padding:20px}
  .title-big{font-size:48px}
  .subtitle{font-size:20px}
}

/* image modal */
.image-modal{display:none; position:fixed; inset:0; background:rgba(0,0,0,0.9); align-items:center; justify-content:center; z-index:9999}
.image-modal img{max-width:95%; max-height:90%; border-radius:12px}
</style>
</head>
<body>

<!-- زر القائمة على اليسار -->
<div class="menu-btn" onclick="toggleSidebar()">☰ القائمة</div>

<!-- القائمة الجانبية على اليمين -->
<aside class="sidebar" id="sidebar">
  <h2><a href="/" style="color:white;text-decoration:none">MUTINY</a></h2>
  {% for slug, p in menu.items() %}
    {% if slug != "home" %}
      <a href="/page/{{ slug }}"><img src="/static/{{ p.hero_image }}" alt="{{ p.title }}"> {{ p.title }}</a>
    {% endif %}
  {% endfor %}
</aside>

<main class="main">
  <div class="card">
    {% if page.title != "MUTINY" %}
      <h1 class="title-big">{{ page.title }}</h1>
    {% endif %}

    {% if page.hero_image %}
      <img src="/static/{{ page.hero_image }}" alt="{{ page.title }}" class="hero-img" onclick="openImage(this.src)">
    {% endif %}

    {% if page.title == "MUTINY" %}
      <div class="title-big">MUTINY</div>
      <div class="subtitle">أهلاً بك في أفضل نادي في FC26</div>
    {% else %}
      <div class="section-text">
        {{ page.content_html | safe }}
      </div>
    {% endif %}
  </div>
</main>

<!-- نافذة عرض الصورة -->
<div id="imgModal" class="image-modal" onclick="closeModal()">
  <img id="modalImg" src="" alt="image">
</div>

<script>
function toggleSidebar(){
  document.getElementById('sidebar').classList.toggle('active');
}

// إخفاء القائمة عند الضغط خارجها
document.addEventListener('click', function(e){
  const sidebar = document.getElementById('sidebar');
  const btn = document.querySelector('.menu-btn');
  if(!sidebar.contains(e.target) && !btn.contains(e.target)){
    sidebar.classList.remove('active');
  }
});

// فتح الصورة مكبرة
function openImage(src){
  document.getElementById('imgModal').style.display='flex';
  document.getElementById('modalImg').src=src;
}
function closeModal(){
  document.getElementById('imgModal').style.display='none';
}

// إخفاء زر القائمة عند التمرير للأسفل وإظهارها عند التمرير للأعلى
let lastScroll = 0;
const menuBtn = document.querySelector('.menu-btn');
window.addEventListener('scroll', () => {
  const currentScroll = window.pageYOffset;
  if(currentScroll > lastScroll){
    // التمرير للأسفل → اخفاء الزر
    menuBtn.style.top = "-60px";
  } else {
    // التمرير للأعلى → إظهار الزر
    menuBtn.style.top = "10px";
  }
  lastScroll = currentScroll;
});
</script>

</body>
</html>
